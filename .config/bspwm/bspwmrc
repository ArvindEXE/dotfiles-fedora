#! /bin/sh

## Autostart programs -----------------------------------------#
sleep 10 && $HOME/.config/bspwm/scripts/bspfloat floating 5 &> $HOME/.log.bspfloat.txt &
polybar &
pgrep -x sxhkd > /dev/null || sxhkd &
eww daemon &
$HOME/.config/conky/Auva/start.sh &
/usr/lib/mate-polkit/polkit-mate-authentication-agent-1 &
xfce4-power-manager &
bash $HOME/.config/bspwm/scripts/fix-plank
picom &
feh --bg-fill ~/Pictures/wallpaper.jpg &
redshift -x && redshift -c ~/.config/redshift/redshift.conf &
xsetroot -cursor_name left_ptr &
ukui-window-switch &
parcellite &
plank &

## Variable Defines ------------------------------------------#
color0=#a9b1d6
color5=#1a1b26
color4=#cfc9c2

## Configurations --------------------------------------------#

bspc monitor -d 1 2 3 4 5 6 7 8 9 10

bspc config border_width        1
bspc config top_padding         46
bspc config right_padding       9
bspc config left_padding        9
bspc config bottom_padding      9
bspc config window_gap          2
bspc config top_monocle_padding  0
bspc config right_monocle_padding 0
bspc config left_monocle_padding 0
bspc config bottom_monocle_padding 0

bspc config focused_border_color "$color0"
bspc config normal_border_color  "$color5"
bspc config active_border_color  "$color0"
bspc config presel_feedback_color "$color4"

bspc config split_ratio          0.50
bspc config borderless_monocle   true  
bspc config gapless_monocle      false
bspc config focus_follows_pointer true
bspc config external_rules_command "$HOME/.config/bspwm/external_rules.sh"
bspc config merge_overlapping_monitors true

## Window rules ----------------------------------------------#
# Use command "xprop | grep WM_CLASS" to find the name of the application to be entered below
# After the command click on the application window and the name will be generated after the command and use the name generated by this command.

# remove all rules first
bspc rule -r *:*
   
# 1 > web
bspc rule -a librewolf desktop='^1' follow=on
bspc rule -a com.github.Eloston.UngoogledChromium desktop='^1' follow=on

# 2 > multimedia
declare -a media=(Thunar mpv feh Inkscape Gimp-2.10 Blender Handbrake)
for i in ${media[@]}; do
   bspc rule -a $i desktop='^2' follow=on focus=on; done

# 3 > office and docs
declare -a office=(Gucharmap Atril Evince \
libreoffice-writer libreoffice-calc libreoffice-impress \
libreoffice-startcenter libreoffice Soffice *:libreofficedev *:soffice DesktopEditors Zathura)
for i in ${office[@]}; do
   bspc rule -a $i desktop='^3' follow=on focus=on; done

# 4 > code
declare -a code=(Geany code-oss)
for i in ${code[@]}; do
   bspc rule -a $i desktop='^4' follow=on focus=on; done

# 5 > games
declare -a games=(Steam Lutris)
for i in ${games[@]}; do
   bspc rule -a $i desktop='^5' state=floating follow=on focus=on; done

# 6 > terminal
declare -a editing=(kitty)
for i in ${editing[@]}; do
   bspc rule -a $i desktop='^6' follow=on focus=on; done

# 7 > communication
declare -a comm=(Geary discord TelegramDesktop elementdesktop)
for i in ${comm[@]}; do
   bspc rule -a $i desktop='^7' follow=on focus=on; done

# 8 > music
declare -a music=(nuclear)
for i in ${music[@]}; do
   bspc rule -a $i desktop='^8' state=floating follow=on focus=on; done

# 9 > misc 
declare -a misc=(obs)
for i in ${recording[@]}; do
   bspc rule -a $i desktop='^9' state=floating follow=on focus=on; done

# 10 > System monitoring/settings
declare -a settings=(conky-manager2 Xfce4-settings)
for i in ${monitor[@]}; do
   bspc rule -a $i desktop='^10' state=floating follow=on focus=on; done

# special rules
declare -a floating=(Xfce4 'librewolf:Places' Peek conky-manager2 Rofi \
feh )
for i in ${floating[@]}; do
   bspc rule -a $i state=floating follow=on focus=on; done
   
bspc rule -a kitty:progterm state=floating

bspc config external_rules_command "$HOME/.config/bspwm/scripts/external-rules"
bspc rule -a Kupfer.py focus=on
bspc rule -a Screenkey manage=off
bspc rule -a Plank manage=off border=off locked=on focus=off follow=off layer=above
bspc rule -a GLava state=floating layer=below sticky=true locked=true border=off focus=off center=true follow=off rectangle=1920x1080+0+0

